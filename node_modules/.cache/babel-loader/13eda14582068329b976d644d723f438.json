{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import UserStore from\"../stores/UserStore\";var emailRegex=RegExp(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/);var LoginDialog=/*#__PURE__*/function(_React$Component){_inherits(LoginDialog,_React$Component);var _super=_createSuper(LoginDialog);function LoginDialog(){var _this;_classCallCheck(this,LoginDialog);_this=_super.call(this);_this.handleClickOpen=function(){_this.setState({open:true});};_this.handleClose=function(){_this.setState({open:false});};_this.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this.setState(_defineProperty({},name,value));if(_this.state.username===\"\"||_this.state.password1===\"\"||_this.state.password2===\"\"||_this.state.email===\"\"){_this.setState({buttonDisabled:true});}else{_this.setState({buttonDisabled:false});}};_this.handleSubmit=function(event){event.preventDefault();if(_this.state.username.trim()!==\"\"&&_this.state.password1.trim()!==\"\"&&emailRegex.test(_this.state.email)&&_this.match!==\"\"){_this.setState({buttonDisabled:true});_this.handleClose();_this.doRegister();}else if(_this.state.username===\"\"||_this.state.password1===\"\"||_this.state.password2===\"\"||_this.state.email===\"\"){alert(\"Please fill the fields\");}else if(_this.match!==\"\"){alert(\"Passwords don't match\");}else{alert(\"Please input correct email adress\");}};_this.match=\"\";_this.state={open:false,username:\"\",email:\"\",password1:\"\",password2:\"\",buttonDisabled:true};_this.handleClickOpen=_this.handleClickOpen.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginDialog,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/isLoggedIn\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.unsername=result.username;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doRegister\",value:function(){var _doRegister=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/register\",{method:\"post\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:this.state.email,username:this.state.username,password:this.state.password1})});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=true;UserStore.username=result.username;}else if(result&&result.success===false){alert(result.msg);}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:this.setState({buttonDisabled:false});case 14:case\"end\":return _context2.stop();}}},_callee2,this,[[0,10]]);}));function doRegister(){return _doRegister.apply(this,arguments);}return doRegister;}()},{key:\"render\",value:function render(){if(this.state.password1!==this.state.password2){this.match=\"Passwords don't match\";}else{this.match=\"\";}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",onClick:this.handleClickOpen},\"Register\"),/*#__PURE__*/React.createElement(Dialog,{open:this.state.open,onClose:this.handleClose,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Register\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",id:\"username\",name:\"username\",required:true,label:\"Username\",type:\"text\",onChange:this.handleChange,value:this.state.username,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{margin:\"dense\",id:\"email\",name:\"email\",required:true,label:\"Email Address\",type:\"email\",onChange:this.handleChange,value:this.state.email,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{margin:\"dense\",id:\"password1\",name:\"password1\",required:true,label:\"Password\",type:\"password\",onChange:this.handleChange,value:this.state.password1,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{margin:\"dense\",id:\"password2\",name:\"password2\",required:true,label:\"Confirm password\",type:\"password\",onChange:this.handleChange,value:this.state.password2,fullWidth:true}),/*#__PURE__*/React.createElement(\"label\",null,this.match)),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:this.handleClose,color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:this.handleSubmit,color:\"primary\",disabled:this.state.buttonDisabled},\"Register\"))));}}]);return LoginDialog;}(React.Component);export default LoginDialog;","map":{"version":3,"sources":["D:/react/front/src/components/Register.js"],"names":["React","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","UserStore","emailRegex","RegExp","LoginDialog","handleClickOpen","setState","open","handleClose","handleChange","event","target","value","name","state","username","password1","password2","email","buttonDisabled","handleSubmit","preventDefault","trim","test","match","doRegister","alert","bind","fetch","method","headers","Accept","res","json","result","success","loading","isLoggedIn","unsername","body","JSON","stringify","password","msg","console","log","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport UserStore from \"../stores/UserStore\";\r\n\r\nconst emailRegex = RegExp(\r\n\t/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/\r\n);\r\nclass LoginDialog extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.match = \"\";\r\n\t\tthis.state = {\r\n\t\t\topen: false,\r\n\t\t\tusername: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tpassword1: \"\",\r\n\t\t\tpassword2: \"\",\r\n\t\t\tbuttonDisabled:true\r\n\t\t};\r\n\t\tthis.handleClickOpen = this.handleClickOpen.bind(this);\r\n\t\tthis.handleClose = this.handleClose.bind(this);\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t}\r\n\thandleClickOpen = () => {\r\n\t\tthis.setState({ open: true });\r\n\t};\r\n\r\n\thandleClose = () => {\r\n\t\tthis.setState({ open: false });\r\n\t};\r\n\thandleChange = (event) => {\r\n\t\tconst target = event.target;\r\n\t\tconst value = target.value;\r\n\t\tconst name = target.name;\r\n\t\tthis.setState({ [name]: value });\r\n\t\tif(this.state.username === \"\" ||\r\n\t\tthis.state.password1 === \"\" ||\r\n\t\tthis.state.password2 === \"\" ||\r\n\t\tthis.state.email === \"\"){\r\n\t\t\tthis.setState({buttonDisabled:true});\r\n\t\t}else{\r\n\t\t\tthis.setState({buttonDisabled:false});\r\n\t\t}\r\n\t};\r\n\thandleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (\r\n\t\t\tthis.state.username.trim() !== \"\" &&\r\n\t\t\tthis.state.password1.trim() !== \"\" &&\r\n\t\t\temailRegex.test(this.state.email) &&\r\n\t\t\tthis.match !== \"\"\r\n\t\t) {\r\n\t\t\tthis.setState({ buttonDisabled: true });\r\n\t\t\tthis.handleClose();\r\n\t\t\tthis.doRegister();\r\n\t\t} else if (\r\n\t\t\tthis.state.username === \"\" ||\r\n\t\t\tthis.state.password1 === \"\" ||\r\n\t\t\tthis.state.password2 === \"\" ||\r\n\t\t\tthis.state.email === \"\"\r\n\t\t) {\r\n\t\t\talert(`Please fill the fields`);\r\n\t\t} else if (this.match !== \"\") {\r\n\t\t\talert(\"Passwords don't match\");\r\n\t\t} else {\r\n\t\t\talert(\"Please input correct email adress\");\r\n\t\t}\r\n\t};\r\n\tasync componentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet res = await fetch(\"/isLoggedIn\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tlet result = await res.json();\r\n\t\t\tif (result && result.success) {\r\n\t\t\t\tUserStore.loading = false;\r\n\t\t\t\tUserStore.isLoggedIn = true;\r\n\t\t\t\tUserStore.unsername = result.username;\r\n\t\t\t} else {\r\n\t\t\t\tUserStore.loading = false;\r\n\t\t\t\tUserStore.isLoggedIn = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tUserStore.loading = false;\r\n\t\t\tUserStore.isLoggedIn = false;\r\n\t\t}\r\n\t}\r\n\tasync doRegister() {\r\n\t\ttry {\r\n\t\t\tlet res = await fetch(\"/register\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Accept\": \"application/json\",\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\temail: this.state.email,\r\n\t\t\t\t\tusername: this.state.username,\r\n\t\t\t\t\tpassword: this.state.password1,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tlet result = await res.json();\r\n\t\t\tif (result && result.success) {\r\n\t\t\t\tUserStore.isLoggedIn = true;\r\n\t\t\t\tUserStore.username = result.username;\r\n\t\t\t} else if (result && result.success === false) {\r\n\t\t\t\talert(result.msg);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\tthis.setState({ buttonDisabled: false });\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.password1 !== this.state.password2) {\r\n\t\t\tthis.match = \"Passwords don't match\";\r\n\t\t}else{\r\n\t\t\tthis.match = \"\";\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={this.handleClickOpen}\r\n\t\t\t\t>\r\n\t\t\t\t\tRegister\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.state.open}\r\n\t\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\t\taria-labelledby=\"form-dialog-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Register</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel=\"Email Address\"\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"password1\"\r\n\t\t\t\t\t\t\tname=\"password1\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password1}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"password2\"\r\n\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel=\"Confirm password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password2}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label>{this.match}</label>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.handleClose} color=\"primary\">\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button onClick={this.handleSubmit} color=\"primary\" disabled={this.state.buttonDisabled}>\r\n\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoginDialog;\r\n"]},"metadata":{},"sourceType":"module"}