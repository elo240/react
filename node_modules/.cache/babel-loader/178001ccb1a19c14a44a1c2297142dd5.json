{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{observer}from\"mobx-react\";import MyHeader from\"./components/MyHeader\";import MyFooter from\"./components/MyFooter\";import Home from\"./Home\";import Forum from\"./Forum\";import List from\"./List\";import{ProtectedRoute}from\"./components/ProtectedRoute\";import\"./css/style.css\";import UserStore from\"./stores/UserStore\";import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";var Start=/*#__PURE__*/function(_React$Component){_inherits(Start,_React$Component);var _super=_createSuper(Start);function Start(){_classCallCheck(this,Start);return _super.apply(this,arguments);}_createClass(Start,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/isLoggedIn\",{method:\"post\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.username=result.username;UserStore.userID=result.userID;}else{UserStore.loading=false;UserStore.isLoggedIn=false;UserStore.username=\"\";UserStore.userID=-1;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){if(UserStore.isLoggedIn);if(UserStore.username);if(UserStore.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},\"Loading, please wait\");}else{return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(MyHeader,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/\",exact:true,component:Home}),/*#__PURE__*/React.createElement(ProtectedRoute,{path:\"/forum\",component:Forum}),/*#__PURE__*/React.createElement(ProtectedRoute,{path:\"/list\",component:List})),/*#__PURE__*/React.createElement(MyFooter,null)));}}}]);return Start;}(React.Component);export default observer(Start);","map":{"version":3,"sources":["D:/react/front/src/Start.js"],"names":["React","observer","MyHeader","MyFooter","Home","Forum","List","ProtectedRoute","UserStore","BrowserRouter","Router","Switch","Route","Start","fetch","method","headers","res","json","result","success","loading","isLoggedIn","username","userID","Component"],"mappings":"qzBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,OAAQC,cAAR,KAA6B,6BAA7B,CACA,MAAO,iBAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CAEA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,MAAlC,CAA0CC,KAA1C,KAAuD,kBAAvD,C,GACMC,CAAAA,K,igBAGaC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACpCC,MAAM,CAAE,MAD4B,CAEpCC,OAAO,CAAE,CACR,SAAU,kBADF,CAER,eAAgB,kBAFR,CAF2B,CAAhB,C,QAAjBC,G,qCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC7BZ,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,IAAvB,CACAd,SAAS,CAACe,QAAV,CAAqBJ,MAAM,CAACI,QAA5B,CACAf,SAAS,CAACgB,MAAV,CAAiBL,MAAM,CAACK,MAAxB,CACA,CALD,IAKO,CACNhB,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,KAAvB,CACAd,SAAS,CAACe,QAAV,CAAoB,EAApB,CACAf,SAAS,CAACgB,MAAV,CAAiB,CAAC,CAAlB,CACA,C,iFAEDhB,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,KAAvB,C,yNAGO,CACR,GAAId,SAAS,CAACc,UAAd,CAAyB,CACzB,GAAId,SAAS,CAACe,QAAd,CAAuB,CACvB,GAAIf,SAAS,CAACa,OAAd,CAAuB,CACtB,mBAAO,2BAAK,SAAS,CAAC,iBAAf,yBAAP,CACA,CAFD,IAEO,CACN,mBACC,oBAAC,MAAD,mBACC,2BAAK,SAAS,CAAC,iBAAf,eACC,oBAAC,QAAD,MADD,cAEC,oBAAC,MAAD,mBACC,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,CAAsB,SAAS,CAAEjB,IAAjC,EADD,cAGC,oBAAC,cAAD,EAAgB,IAAI,CAAC,QAArB,CAA8B,SAAS,CAAEC,KAAzC,EAHD,cAIC,oBAAC,cAAD,EAAgB,IAAI,CAAC,OAArB,CAA6B,SAAS,CAAEC,IAAxC,EAJD,CAFD,cASC,oBAAC,QAAD,MATD,CADD,CADD,CAeA,CACD,C,mBAjDkBN,KAAK,CAACyB,S,EAmD1B,cAAexB,CAAAA,QAAQ,CAACY,KAAD,CAAvB","sourcesContent":["import React from \"react\";\r\n\r\nimport { observer } from \"mobx-react\";\r\nimport MyHeader from \"./components/MyHeader\";\r\nimport MyFooter from \"./components/MyFooter\";\r\nimport Home from \"./Home\";\r\nimport Forum from \"./Forum\";\r\nimport List from \"./List\";\r\nimport {ProtectedRoute} from \"./components/ProtectedRoute\"\r\nimport \"./css/style.css\";\r\nimport UserStore from \"./stores/UserStore\";\r\n\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nclass Start extends React.Component {\r\n\tasync componentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet res = await fetch(\"/isLoggedIn\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Accept\": \"application/json\",\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tlet result = await res.json();\r\n\t\t\tif (result && result.success) {\r\n\t\t\t\tUserStore.loading = false;\r\n\t\t\t\tUserStore.isLoggedIn = true;\r\n\t\t\t\tUserStore.username = result.username;\r\n\t\t\t\tUserStore.userID=result.userID;\r\n\t\t\t} else {\r\n\t\t\t\tUserStore.loading = false;\r\n\t\t\t\tUserStore.isLoggedIn = false;\r\n\t\t\t\tUserStore.username =\"\"\r\n\t\t\t\tUserStore.userID=-1;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tUserStore.loading = false;\r\n\t\t\tUserStore.isLoggedIn = false;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (UserStore.isLoggedIn);\r\n\t\tif (UserStore.username);\r\n\t\tif (UserStore.loading) {\r\n\t\t\treturn <div className=\"container-fluid\">Loading, please wait</div>;\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t<MyHeader />\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route path=\"/\" exact component={Home}/>\r\n\t\t\t\t\t\t\t{/* <Route path=\"/forum\" component={Forum}/> */}\r\n\t\t\t\t\t\t\t<ProtectedRoute path=\"/forum\" component={Forum}/>\r\n\t\t\t\t\t\t\t<ProtectedRoute path=\"/list\" component={List}/>\r\n\t\t\t\t\t\t\t{/* <Route path=\"/list\" component={List}/>  */}\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t<MyFooter />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Router>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\nexport default observer(Start);\r\n"]},"metadata":{},"sourceType":"module"}