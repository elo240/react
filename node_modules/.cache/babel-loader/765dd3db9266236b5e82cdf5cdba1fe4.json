{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import UserStore from\"../stores/UserStore\";var LoginDialog=/*#__PURE__*/function(_React$Component){_inherits(LoginDialog,_React$Component);var _super=_createSuper(LoginDialog);function LoginDialog(){var _this;_classCallCheck(this,LoginDialog);_this=_super.call(this);_this.handleClickOpen=function(){_this.setState({open:true});};_this.handleClose=function(){_this.setState({open:false});};_this.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();if(_this.state.password!==\"\"&&_this.state.username.trim!==\"\"){_this.handleClose();_this.doLogin();}else if(_this.state.password===\"\"&&_this.state.username.trim===\"\"){alert(\"Please fill the fields\");}};_this.state={open:false,username:\"\",password:\"\",buttonDisabled:false};_this.handleClickOpen=_this.handleClickOpen.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.resetForm=_this.resetForm.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginDialog,[{key:\"resetForm\",value:function resetForm(){this.setState({username:\"\",password:\"\",buttonDisabled:false});}},{key:\"doLogin\",value:function(){var _doLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({buttonDisabled:true});_context.prev=1;_context.next=4;return fetch(\"/login\",{method:\"post\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({username:this.state.username,password:this.state.password})});case 4:res=_context.sent;_context.next=7;return result.json();case 7:result=_context.sent;if(result&&result.success){UserStore.isLoggedIn=true;UserStore.username=result.username;}else if(result&&result.success===false){this.resetForm();alert(result.msg);}this.setState({buttonDisabled:false});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,this,[[1,12]]);}));function doLogin(){return _doLogin.apply(this,arguments);}return doLogin;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",onClick:this.handleClickOpen,disabled:this.state.buttonDisabled},\"Login\"),/*#__PURE__*/React.createElement(Dialog,{open:this.state.open,onClose:this.handleClose,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Please log in\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",id:\"username\",name:\"username\",required:true,label:\"Username\",type:\"text\",onChange:this.handleChange,value:this.state.username,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{margin:\"dense\",id:\"password\",name:\"password\",required:true,label:\"Password\",type:\"password\",onChange:this.handleChange,value:this.state.password,fullWidth:true})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:this.handleClose,color:\"primary\"},\"Close\"),/*#__PURE__*/React.createElement(Button,{onClick:this.handleSubmit,color:\"primary\",disabled:this.state.buttonDisabled},\"Login\"))));}}]);return LoginDialog;}(React.Component);export default LoginDialog;","map":{"version":3,"sources":["D:/react/front/src/components/LoginDialog.js"],"names":["React","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","UserStore","LoginDialog","handleClickOpen","setState","open","handleClose","handleChange","event","target","value","name","handleSubmit","preventDefault","state","password","username","trim","doLogin","alert","buttonDisabled","bind","resetForm","fetch","method","headers","body","JSON","stringify","res","result","json","success","isLoggedIn","msg","console","log","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport UserStore from \"../stores/UserStore\";\r\n\r\nclass LoginDialog extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\topen: false,\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tbuttonDisabled: false,\r\n\t\t};\r\n\t\tthis.handleClickOpen = this.handleClickOpen.bind(this);\r\n\t\tthis.handleClose = this.handleClose.bind(this);\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.resetForm = this.resetForm.bind(this);\r\n\t}\r\n\thandleClickOpen = () => {\r\n\t\tthis.setState({ open: true });\r\n\t};\r\n\r\n\thandleClose = () => {\r\n\t\tthis.setState({ open: false });\r\n\t};\r\n\thandleChange = (event) => {\r\n\t\tconst target = event.target;\r\n\t\tconst value = target.value;\r\n\t\tconst name = target.name;\r\n\t\tthis.setState({ [name]: value });\r\n\t};\r\n\thandleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.state.password !== \"\" && this.state.username.trim !== \"\") {\r\n\t\t\tthis.handleClose();\r\n\t\t\tthis.doLogin();\r\n\t\t} else if (\r\n\t\t\tthis.state.password === \"\" &&\r\n\t\t\tthis.state.username.trim === \"\"\r\n\t\t) {\r\n\t\t\talert(`Please fill the fields`);\r\n\t\t}\r\n\t};\r\n\tresetForm() {\r\n\t\tthis.setState({\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tbuttonDisabled: false,\r\n\t\t});\r\n\t}\r\n\tasync doLogin() {\r\n\t\tthis.setState({ buttonDisabled: true });\r\n\t\ttry {\r\n\t\t\tlet res = await fetch(\"/login\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Accept\": \"application/json\",\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tusername: this.state.username,\r\n\t\t\t\t\tpassword: this.state.password,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tlet result = await result.json();\r\n\t\t\tif (result && result.success) {\r\n\t\t\t\tUserStore.isLoggedIn = true;\r\n\t\t\t\tUserStore.username = result.username;\r\n\t\t\t} else if (result && result.success === false) {\r\n\t\t\t\tthis.resetForm();\r\n\t\t\t\talert(result.msg);\r\n\t\t\t}\r\n\t\t\tthis.setState({buttonDisabled:false});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={this.handleClickOpen}\r\n\t\t\t\t\tdisabled={this.state.buttonDisabled}\r\n\t\t\t\t>\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.state.open}\r\n\t\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\t\taria-labelledby=\"form-dialog-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t\tPlease log in\r\n\t\t\t\t\t</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.handleClose} color=\"primary\">\r\n\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={this.handleSubmit}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tdisabled={this.state.buttonDisabled}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoginDialog;\r\n"]},"metadata":{},"sourceType":"module"}