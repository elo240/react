{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\react\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import LoginDialog from\"./LoginDialog\";import Button from\"@material-ui/core/Button\";import UserStore from\"../stores/UserStore\";var LoginOut=/*#__PURE__*/function(_React$Component){_inherits(LoginOut,_React$Component);var _super=_createSuper(LoginOut);function LoginOut(){_classCallCheck(this,LoginOut);return _super.apply(this,arguments);}_createClass(LoginOut,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/isLoggedIn\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.unsername=result.username;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/logout\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.unsername=\"\";}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(UserStore.isLoggedIn){return/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",disabled:false,onClick:function onClick(){return _this.doLogout;}},\"Logout\");}else{return/*#__PURE__*/React.createElement(LoginDialog,null);}}}]);return LoginOut;}(React.Component);export default LoginOut;","map":{"version":3,"sources":["D:/react/front/src/components/LoginOut.js"],"names":["React","LoginDialog","Button","UserStore","LoginOut","fetch","method","headers","Accept","res","json","result","success","loading","isLoggedIn","unsername","username","console","log","doLogout","Component"],"mappings":"qzBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,C,GACMC,CAAAA,Q,ghBAGaC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACpCC,MAAM,CAAE,MAD4B,CAEpCC,OAAO,CAAE,CACRC,MAAM,CAAE,kBADA,CAER,eAAgB,kBAFR,CAF2B,CAAhB,C,QAAjBC,G,qCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC7BT,SAAS,CAACU,OAAV,CAAoB,KAApB,CACAV,SAAS,CAACW,UAAV,CAAuB,IAAvB,CACAX,SAAS,CAACY,SAAV,CAAsBJ,MAAM,CAACK,QAA7B,CACA,CAJD,IAIO,CACNb,SAAS,CAACU,OAAV,CAAoB,KAApB,CACAV,SAAS,CAACW,UAAV,CAAuB,KAAvB,CACA,C,iFAEDX,SAAS,CAACU,OAAV,CAAoB,KAApB,CACAV,SAAS,CAACW,UAAV,CAAuB,KAAvB,C,0dAKgBT,CAAAA,KAAK,CAAC,SAAD,CAAY,CAChCC,MAAM,CAAE,MADwB,CAEhCC,OAAO,CAAE,CACRC,MAAM,CAAE,kBADA,CAER,eAAgB,kBAFR,CAFuB,CAAZ,C,QAAjBC,G,uCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,gBACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC7BT,SAAS,CAACW,UAAV,CAAuB,KAAvB,CACAX,SAAS,CAACY,SAAV,CAAsB,EAAtB,CACA,C,qFAEDE,OAAO,CAACC,GAAR,e,gMAGO,gBACR,GAAIf,SAAS,CAACW,UAAd,CAA0B,CACzB,mBACC,oBAAC,MAAD,EACC,OAAO,CAAC,UADT,CAEC,KAAK,CAAC,SAFP,CAGC,QAAQ,CAAE,KAHX,CAIC,OAAO,CAAE,yBAAM,CAAA,KAAI,CAACK,QAAX,EAJV,WADD,CAUA,CAXD,IAWO,CACN,mBAAO,oBAAC,WAAD,MAAP,CACA,CACD,C,sBAzDqBnB,KAAK,CAACoB,S,EA4D7B,cAAehB,CAAAA,QAAf","sourcesContent":["import React from \"react\";\r\nimport LoginDialog from \"./LoginDialog\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport UserStore from \"../stores/UserStore\";\r\nclass LoginOut extends React.Component {\r\n\tasync componentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet res = await fetch(\"/isLoggedIn\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tlet result = await res.json();\r\n\t\t\tif (result && result.success) {\r\n\t\t\t\tUserStore.loading = false;\r\n\t\t\t\tUserStore.isLoggedIn = true;\r\n\t\t\t\tUserStore.unsername = result.username;\r\n\t\t\t} else {\r\n\t\t\t\tUserStore.loading = false;\r\n\t\t\t\tUserStore.isLoggedIn = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tUserStore.loading = false;\r\n\t\t\tUserStore.isLoggedIn = false;\r\n\t\t}\r\n\t}\r\n\tasync doLogout() {\r\n\t\ttry {\r\n\t\t\tlet res = await fetch(\"/logout\", {\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tlet result = await res.json();\r\n\t\t\tif (result && result.success) {\r\n\t\t\t\tUserStore.isLoggedIn = false;\r\n\t\t\t\tUserStore.unsername = \"\";\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (UserStore.isLoggedIn) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\tonClick={() => this.doLogout}\r\n\t\t\t\t>\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn <LoginDialog />;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default LoginOut;\r\n"]},"metadata":{},"sourceType":"module"}